#########################华通sit环境配置#########################
#单数据源配置 start#
spring:
  jackson:
    default-property-inclusion: non_null
  mvc:
    async:
      request-timeout: 60000
  datasource:
    driver-class-name: com.mysql.jdbc.Driver
    type: com.alibaba.druid.pool.DruidDataSource
    connectionProperties: druid.stat.mergeSql=true
    url: jdbc:mysql://10.11.44.20:44/db_utp_ht?useUnicode=true&characterEncoding=utf-8&verifyServerCertificate=false&useSSL=false&zeroDateTimeBehavior=convertToNull
    username: utp_ht_rw
    password: FoI768LnKn
    druid:
      initial-size: 50
      max-active: 300
      min-idle: 10
      keep-alive: true
      pool-prepared-statements: true
      max-pool-prepared-statement-per-connectionSize: 100
      validation-query: select 'x' from dual
      test-while-idle: true
      time-between-eviction-runs-millis: 60000
      min-evictable-idle-time-millis: 300000
      validation-query-timeout: 1000
      phy-timeout-millis: 60000
      filters: stat,log4j
      stat-view-servlet:
        login-username: utp
        login-password: utp=123
  redis:
    sentinel:
      master: mymaster
      nodes: 10.11.20.99:6900,10.11.20.99:6901,10.11.20.99:6902
#    password: ''
#单数据源配置 end#

pagehelper:
  helperDialect: mysql
  reasonable: true
  offsetAsPageNum: true
  supportMethodsArguments: true

#日志配置 start#
logging:
  level:
    root: INFO
    cn.kingnet.utp: DEBUG
    cn.kingnet.utp.service.persistence: DEBUG
    cn.kingnet.utp.channel: DEBUG
    cn.kingnet.product: DEBUG
    com.baomidou.mybatisplus: DEBUG
    org.spring.springboot.dao: DEBUG
    cn.kingnet.utp.trade.common.security: DEBUG
    cn.kingnet.product.account.service.impl: DEBUG
  config: file:./utp-config/logback-spring.xml
  file: /data/app/app/log/utp-v2/${spring.application.name}/${spring.application.name}.log
  file.max-size: 50MB
  file.max-history: 180
#日志配置 end#

#mybatis-plus配置 start#
mybatis-plus:
  mapper-locations: classpath:/mapper/*Mapper.xml
  configuration:
    map-underscore-to-camel-case: true
    cache-enabled: false
  global-config:
    id-type: 2
    field-strategy: 0
    db-column-underline: true
    refresh-mapper: true
    capital-mode: true
#mybatis-plus配置 end#

#hystrix及ribbon配置 start#
hystrix:
  command:
    default:
      execution:
        timeout:
          enabled: true
        isolation:
          thread:
            timeoutInMilliseconds: 60000
ribbon:
  ReadTimeout: 60000
  ConnectTimeout: 60000
  MaxAutoRetries: 1
  MaxAutoRetriesNextServer: 1
  eureka:
    enabled: true
#hystrix及ribbon配置 end#

#渠道配置 start#
cn:
  kingnet:
    utp:
      sign-type: HTSIGN
      private-key: MIIEvwIBADANBgkqhkiG9w0BAQEFAASCBKkwggSlAgEAAoIBAQC56eg2KfG1ZuOvXBwVal2ssq2kFXljdKHHN/9pf+BmwFGw0XlKQhMtHBtAgWDtwhbRqO6zieVrBlXXVM3KH4lZUrCrC30eFjliCQCoWuCrJY5X1qXioQ7v/HpYeo4l0rQJ8moZxoQXZ2+2NkyOQVAPqKb7jR718+F6JZyGpqf8GiIGAJ5AceJsPzEonyXjq2AKIr93pPL+pGF/xTXunctwGSMaB+4GuxjYMqL96epQH1fX1pyW1HXLluYi6z4b74g5G/HRWzmsuNlwgSkeodiqZfkNasbMmEbva+SeewbaYiCWjewPvNssVY2X59rGbs+FBU4FL36PGK5N6ZuQuJBrAgMBAAECggEBAKxcDhwBIQTz4czXEXZNSZFtigxgmEy7eazv3oyZsJqyXEoYumE9BvhAYYeZKxriYTN5cevjwV1K31SmW6+zMywrvHynRxUYt5SLEiADON2TEPegmeSVOvsFUQwsexLX2HCMXQ+OezIThH8isjEEnkwWKNF4USbnNrh+nDI92emfYD1tKWKhA/eC2fGeRiML5NqJ5B2SmjoBRsQeKjZTsqX/RjoscEAH5EpZOhi6VeDQc/u8ujiPl6EQr7yEqQMSn5vH5ilJ9RT3BzJXuKLvI2uHOowY3DQGMuyAQGSXp5ggpJqOIJ6cRkkgCKMCdVvkIIQESvs/2emMJ9YpldqGyzECgYEA2mdf1Iu0Z3VsM9vNH/wLUeDcYrL1A4/p/d72lxgaknAHhchmL+aJ4oSnYmf/nLO43YNYUD16f5AO6toGaDNri7+BJRspT2kquRqUiopWTGZvx/gIJUocqTqX8unL9JEqdtU3Rl3VdOAfi+B6pZnsrMJiBwOC1929xYVu4Y4AAGkCgYEA2erB+jckZubvs55zAz2XJg/U1r9gGNbFVzbC2vgTn5A3hFx4Ubwh8Q2oqwuCLgxH2gtYpufdeiM+dp8tgn0qKsDA8Yo6XZRyeSodMgk0UXCZfjzC/loLpWFSiy2pfxFRU+6r1RaHKq5bFdkJRgR2Yx+DjPvsgzGIrXDSngzdL7MCgYEA100c/UyTlYH+HslJ14QCLL88wtekDdTrWOdZs+2BFGb4I3xAsGvV9cXLtIjNRU8uqL/4aXGRtvrumbpAoqw+Es/AojG6cZw9D6kSUdi55ir9euYaMZhz1Kf8buznsLsCX48lJGsQKF1g++VZQrMQy+X7+OoPLHpdv8AgZJ41hjECgYBbgN8I8SSg7PHUC4Gh57fTLKyjq+JvK6fbskvp5GdhBg65zpZbQ9NAxAqCICf+q/tzzHXiR9RRGAF/j+FtPJ97KksaYX+WkeHrjMqLmx/T3qMlReBfK3JedFpTxM26ZIww4TRYGsiRHHt01hi1xOPtRWtYxOQQRrlsksZtxVsPTwKBgQCZYdpwzseBfTmfcx5DjVPrbBXUtQcZwaUWNTUdp8vNmc5Q3dYrC0IAihzt2lQ7mTm2HJ0ILe/gV2Ul9U3FAKw7Ho9d4MviY0okY70EHWi7ulVRKTxfyA1bQ5E54GCYixINy3wshHv1xd3Oc4YvZaUaBdJLY3pUAxQHweIo0awM1g==
      public-key: MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAuenoNinxtWbjr1wcFWpdrLKtpBV5Y3Shxzf/aX/gZsBRsNF5SkITLRwbQIFg7cIW0ajus4nlawZV11TNyh+JWVKwqwt9HhY5YgkAqFrgqyWOV9al4qEO7/x6WHqOJdK0CfJqGcaEF2dvtjZMjkFQD6im+40e9fPheiWchqan/BoiBgCeQHHibD8xKJ8l46tgCiK/d6Ty/qRhf8U17p3LcBkjGgfuBrsY2DKi/enqUB9X19acltR1y5bmIus+G++IORvx0Vs5rLjZcIEpHqHYqmX5DWrGzJhG72vknnsG2mIglo3sD7zbLFWNl+faxm7PhQVOBS9+jxiuTembkLiQawIDAQAB
      auth-cache-timeout: 0
      ht-sign-flag: 1
      sign-cert-name: JFJT_sign
      verify-cert-name: CFCA_TEST_OCA1
      virtual-account-prefix: '9100001101'
      precard-account-prefix: '9990001101'
      cipher:
        private-key: MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJnV76/QwGtrNYfsvSYaQRgRImroDZkErmAKxXcGUwpIxrRfD5iNUMtj9ca84sUefyf1+Yyn9KhNZjhuaRwfF9/QGSuLViUmboWw1quF2CB2pxNPV1pVzx+CH/6+CimyXMLBDMHhXombRYKDgdevtMR/V+/C7MjUiAFnHBcaEP7TAgMBAAECgYEAharnnlwDphK8q8OfwujTIMdaoYvKrOftYFRbqgVbyDbeOUHUOlioGGJd33amkGLkV+OaF4akxkyigmwldqLpyVrI/4Ru1knqwDq447qQ42QXRdBflrSX9guQ41WyyjOi5ErnwG24z/QcaX8FpVKJ809Qeo2NNJFu/iq7CfJxOpkCQQDhdeFwJeW6oBAk0PW4Ul/L8KEwbLqNu1B1KrRla/H1/QxBuCbSHJAbsWVsjCICSa8CBY1weC3h/kUJscGjiikXAkEArqxgzo9ZIwldKS/PIh8rIYS9Hg0x13eaXV28gQFxvX4rsE86Pa/UZ+F77Rr+jeBNUHT++8J0Vizb9NxuyMt1pQJAU5OFHDOQM1w+X8duLwOqK0lqFy9XAE8dhjFsaeRX7138eygui9i2uu1JsbFIshxqWY+BXN3P9GRzZyKTq3H9xQJARflMNrN6U+zWYz+BzPuLfbv9PuKuStDhB/IbJ9r6Q50dx12VyUx83LiZupyLyS5ICqkz1ItLq5IA85Cy2MGY+QJAYZV/kPGXCZkdpY6fnUBqM/NqEg553rgVm9uOC6PCjmYncMyKP+UD353Fz0tWSJbp7dK1cdSTW1zEYWud8bzm9A==
        public-key: MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCZ1e+v0MBrazWH7L0mGkEYESJq6A2ZBK5gCsV3BlMKSMa0Xw+YjVDLY/XGvOLFHn8n9fmMp/SoTWY4bmkcHxff0Bkri1YlJm6FsNarhdggdqcTT1daVc8fgh/+vgopslzCwQzB4V6Jm0WCg4HXr7TEf1fvwuzI1IgBZxwXGhD+0wIDAQAB
      mix-trans-map: {'20200304':1} #单位天
      channel:
        onebank:
          thread-pool-num: 8
          max-thread-pool-num: 8
          dmb-config-path: utp-config/onebank/consumer/sit
          timeout: 6000
          channel-id: 'APA'
          txn-teller-id: 'APA001'
          txn-branch-code: '1001'
          dfa: 'EM0'
          target-dfa: 'E10'
          target-dfa-general: 'E10'
          transfer-map:
            private: #RDFA对私区 转账交易
              product-code: '1050030102'
              new-product-code: '1050030103'
              service-id: '3041020009'
              scene-id: '01'
              call-back-service-id: '1041040001'
              call-back-scene-id: '01'
            public: #CDFA对公区 转账交易
              product-code: '1050030102'
              new-product-code: '1050030103'
              service-id: '3041030009'
              scene-id: '01'
              call-back-service-id: '1041040001'
              call-back-scene-id: '01'
            accountBalanceQuery:  #一般户账户余额查询
              service-id: '3013020007'
              scene-id: '09'
              prcscd: 'i302'
            accountTransDetailQuery:  #一般户交易资金明细查询
              service-id: '3013020010'
              scene-id: '03'
              prcscd: 'f304'
            privateTransQuery: #RDFA对私区转账交易结果查询
              service-id: '3043020004'
              scene-id: '01'
            publicTransQuery: #CDFA对公区转账交易结果查询
              service-id: '3043030004'
              scene-id: '01'
            statementDownload: #对账单下载
              product-code: 'ALL'
              service-id: '3044010003'
              scene-id: '03'
            innerAccountBalanceQuery: #内部户账户余额查询及内部户账户信息查询
              service-id: '3013010028'
              scene-id: '05'
              prcscd: 'i303'
            innerAccountTransDetailQuery: #内部户交易资金明细查询
              service-id: '3013010029'
              scene-id: '06'
              prcscd: 'i328'
            accountVerification: #RDFA对私区四要素认证
              product-code: '1050030102'
              new-product-code: '1050030103'
              service-id: '3042020006'
              scene-id: '01'
              version: '1.0.1'
            accountPublicVerification: #CDFA对公区四要素认证
              product-code: '1050030102'
              new-product-code: '1050030103'
              service-id: '3042030006'
              scene-id: '01'
              version: '1.0.1'
            accountInfoQuery: #一般户账户信息查询
              service-id: '3013020007'
              scene-id: '10'
              prcscd: 'i306'
            getPersonHotspot: #查询个人客户热点信息
              service-id: '2013010001'
              scene-id: '01'
            getOrgHotspot: #查询企业客户热点信息
              service-id: '2013010002'
              scene-id: '01'
            addPerson: #建立个人客户信息
              service-id: '2012010001'
              scene-id: '01'
            addOrg: #建立企业客户信息
              service-id: '2012010002'
              scene-id: '01'
            updatePerson: #更新个人客户信息
              service-id: '2012010001'
              scene-id: '04'
            updateOrg: #更新企业客户信息
              service-id: '2012010002'
              scene-id: '04'
            orcIdentity: #ORC身份识别
              service-id: '6012010004'
              scene-id: '01'
            onlineCheck: #联网核查
              product-code: '3044APA001'
              service-id: '5012010004'
              scene-id: '01'
          ftp:
            host: 10.11.17.77
            port: 6688
            https-port: 6686
            sys-id: 30449
            user-name: sys_30449
            password: E2B4A17B055FE659F3DA4FC3696EB0EEEBAE6B555BBC1D8D2F55EEA0DCF7A3AB
          electronic:
            url: 'http://10.11.16.139:8080/PaperlessServer/PaperlessServlet'
            operator-code: '001001'
            channel-code: 'APA'
            seal-code: 'RECEIPT'
            seal-password: '11111111'
            timestamp-channel: '0'
            template-config-map:
              #帝网科技客户电子回单模版参数配置
              KHDZHD:
                template-code: 'APA-KHDZHD-001'
                sign-location-type: '2'
                left-x: 560
                left-y: 320
              #帝网科技客户电子回单模版参数配置(带手续费)
              KHDZHD002:
                template-code: 'APA-KHDZHD-002'
                sign-location-type: '2'
                left-x: 560
                left-y: 320
              #帝网科技开立回单模版参数配置
              KLHD:
                template-code: 'APA-KLHD-001'
                sign-location-type: '3'
                keyword: '注册会员号开立'
                location-style: 'D'
                offset-x: 20
      reconciliation:
        minus-days: 10
        onebank:
          download-dir: ${user.dir}/../download/reconciliation/onebank/files
          file-type: txt
          corn-time: 0 0 10 * * *
          minusdayrecon-time: 0 0 11 * * *
      product:
        account:
          system-id: '30449'
          dfa: 'EM0'
          public-account:
            payer-opbk: '323391060018'
            acct-type: '01'
            sys-header-acct-type: '3'
          proxy-ip: 10.11.44.132
          proxy-port: 3128
          union-api-config-file: utp-config/onebank/unionapi/sit/serverList.conf
          max-card-auth-count: 5
          max-split-settle-rows: 100
      manage:
        des-key: abcdefghijklmnopqrstuvwx
      download: #文件下载保存目录
        batch-dir: ${user.dir}/../download/batch-files
        settle-dir: ${user.dir}/../download/settle
      upload: #上传文件保存目录
        settle-split-dir: ${user.dir}/../upload/settle-split
        file-dir: ${user.dir}/../upload
      picture:
        file-dir: /data/app/app/utp/nfsfiles/images
      pdf:
        file-dir: /data/app/app/utp/nfsfiles/pdf
      dSpecialReconFile: /data/app/app/utp/nfsfiles/dSpecialReconFile
      subDailyBalanceFile: /data/app/app/utp/nfsfiles/subDailyBalanceFile
      sftp:
        user-name: pssutpsroinsftp
        password: Oneb@nk123
        host: 10.12.36.20
        port: 22022
      schedule:
        pdf-font: utp-config/pdf/simsun.ttf
        logo:  utp-config/pdf/logo.jpg
        official-seal:  utp-config/pdf/stamperDemo.png
        batch-download: #下载批次回执文件任务
          cron: 0 0/15 * * * ?
          gt-minutes: 60  # 条件：大于批次交易时间多少分钟
        ht-properties:
          corn:
            sync-fund-account:
              special-period: 1 #间隔几分钟
              normal-period: 5 #间隔几分钟
              early-time: '001500' #000000-earlyTime区间触发同步起始日期要往前推一天
              sync-all: true #是否全量同步 1|true 开启，其他关闭
            sync-account:
              special-period: 1 #间隔几分钟
              normal-period: 5 #间隔几分钟
            fee-income-account-month-stat: '10 0 2 5 * *'
            fee-income-account-month-colection: '10 0 3 5 * *'
            person-org-hotspot: '0 55 0/1 * * ?'
            subAccountSettleSplitDaily: '0 0/5 * * * ?'
            subAccountSettleSplitPeriod: '0/10 * * * * ?'
            balancePaymentTnSettleDaily: '0 0 8 * * ?'
            makeDSpecialReconFilePeriod: '0 30 0 * * ?'
            makeSubDailyBalanceFilePeriod: '0 0 0 * * ?'
            retainSubDailyBalanceFileDayNum: 10
            mixTransDetailBackUpTask: '0 0 3 * * ?'
          thread-pool-num: 4
          max-thread-pool-num: 8
          blocking-queue-num: 3000
          settle-split-dir: ${user.dir}/../upload/settle-result
          result-dir: ${user.dir}/../upload/result
        deposit-notice:
          periodseconds: 1
        create-ele-receipt:
          periodseconds: 10
        query-trans-status:
          periodseconds: 10
        merchant-account:
          corn-time: 0 0 * * * *
          freeze-hour: 24
          apply-hour: 48
        remark-convert-pdf:
          periodseconds: 30

#渠道配置 end#

feign:
  name:
    onebank: utp-channel-onebank
    persis: utp-service-persistence
    account: utp-product-account
    scheduler: utp-scheduler


#监控
management:
  endpoints:
    web:
      exposure:
        include: "*"
  endpoint:
    health:
      show-details: ALWAYS
info:
  name: ${spring.application.name}
  ip: ${spring.cloud.client.ip-address}
eureka:
  instance:
    prefer-ip-address: true
