<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.kingnet.utp.service.persistence.mapper.CertificateInfoMapper">
  <resultMap id="BaseResultMap" type="cn.kingnet.utp.service.persistence.entity.CertificateInfo">
    <!--
      WARNING - @mbg.generated
    -->
    <id column="id" jdbcType="BIGINT" property="id" />
    <result column="certificate_no" jdbcType="VARCHAR" property="certificateNo" />
    <result column="certificate_seq" jdbcType="VARCHAR" property="certificateSeq" />
    <result column="certificate_name" jdbcType="VARCHAR" property="certificateName" />
    <result column="channel_key" jdbcType="VARCHAR" property="channelKey" />
    <result column="product_code" jdbcType="VARCHAR" property="productCode" />
    <result column="org_code" jdbcType="VARCHAR" property="orgCode" />
    <result column="org_name" jdbcType="VARCHAR" property="orgName" />
    <result column="certificate_type" jdbcType="VARCHAR" property="certificateType" />
    <result column="private_key_password" jdbcType="VARCHAR" property="privateKeyPassword" />
    <result column="private_store_password" jdbcType="VARCHAR" property="privateStorePassword" />
    <result column="effective_date" jdbcType="VARCHAR" property="effectiveDate" />
    <result column="expiration_date" jdbcType="VARCHAR" property="expirationDate" />
    <result column="certificate_path" jdbcType="VARCHAR" property="certificatePath" />
    <result column="status" jdbcType="VARCHAR" property="status" />
    <result column="remark" jdbcType="VARCHAR" property="remark" />
    <result column="gmt_create" jdbcType="TIMESTAMP" property="gmtCreate" />
    <result column="gmt_modified" jdbcType="TIMESTAMP" property="gmtModified" />
    <result column="user_create" jdbcType="VARCHAR" property="userCreate" />
    <result column="user_modified" jdbcType="VARCHAR" property="userModified" />
    <result column="private_key" jdbcType="LONGVARCHAR" property="privateKey" />
    <result column="public_key" jdbcType="LONGVARCHAR" property="publicKey" />
    <result column="certificate_file" jdbcType="LONGVARBINARY" property="certificateFile" />
  </resultMap>

  <!--行业关联的证书 -->
  <select id="getIndustryCertList" parameterType="java.util.Map" resultMap="BaseResultMap">
     SELECT ci.*
     FROM t_certificate_industry_info cii
     JOIN t_industry i ON i.code = cii.industry_code
     JOIN t_certificate_info ci ON ci.id = cii.cert_id
     WHERE cii.industry_code = #{industryCode} AND i.status = '1' AND ci.status = '1'
   </select>

</mapper>